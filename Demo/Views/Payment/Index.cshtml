@model PaymentVM;
@{
    ViewBag.Title = "Payment | Index";
}

<form class="container checkout-container">
    <div class="row g-4">
        <!-- Payment Details Section -->
        <div class="col-md-6">
            <div class="payment-section-checkout">
                <h2 class="mb-4"><i class="fas fa-bus"></i> Payment Details</h2>
                <div class="errorMessage" asp-validation-summary="All"></div>

                <div>
                    <!-- Card Type Selection -->   
              <div class="mb-4 card_container_payment">
                        <label class="card-label" asp-for="CardType">
                            <input type="radio" asp-for="CardType" class="input-radio" id="maybank" value="maybank">
                            <img src="/photo/images/maybank.jpg" alt="Maybank">
                            <span class="option">Maybank</span>
                        </label>

                        <label class="card-label" asp-for="CardType">
                            <input type="radio" asp-for="CardType" class="input-radio" id="cimb" value="cimb">
                            <img src="/photo/images/cimbbank.jpg" alt="CIMB Bank">
                            <span class="option">CIMB Bank</span>
                        </label>

                        <label class="card-label" asp-for="CardType">
                            <input type="radio" asp-for="CardType" class="input-radio" id="hongleong" value="hongleong">
                            <img src="/photo/images/hongleong.jpg" alt="Hong Leong Bank">
                            <span class="option">Hong Leong Bank</span>
                        </label>

                        <label class="card-label" asp-for="CardType">
                            <input type="radio" asp-for="CardType" class="input-radio" id="publicbank" value="publicbank">
                            <img src="/photo/images/publicbank.jpg" alt="Public Bank">
                            <span class="option">Public Bank</span>
                        </label>
                        <span class="errorMessage" asp-validation-for="CardType"></span>
                    </div>
                    <!-- Cardholder Name -->
                    <div class="mb-3">
                        <label asp-for="CardHolderName" class="form-label">Cardholder Name</label>
                        <input type="text" asp-for="CardHolderName" class="form-control"  placeholder="John Doe">
                            <span class="errorMessage" asp-validation-for="CardHolderName"></span>
                    </div>
                    <!-- Card Number -->
                    <div class="mb-3">
                        <label asp-for="CardNumber" class="form-label">Card Number</label>
                        <input type="text" asp-for="CardNumber" class="form-control" placeholder="1234 5678 9012 3456">
                            <span class="errorMessage" asp-validation-for="CardNumber"></span>
                    </div>
                    <!-- Expiration and CVV -->
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label asp-for="ExpirationDate" class="form-label">Expiration Date</label>
                            <input type="text" asp-for="ExpirationDate" class="form-control" placeholder="MM/YY">
                                <span class="errorMessage" asp-validation-for="ExpirationDate"></span>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label asp-for="Cvv" class="form-label">CVV</label>
                            <input type="text"  asp-for="Cvv" class="form-control" placeholder="123">
                                <span class="errorMessage" asp-validation-for="Cvv"></span>
                        </div>
                    </div>
                    <!-- Terms and Conditions -->
                    <div class="form-check mb-4">
                        <input class="form-check-input" type="checkbox" asp-for="TermsCheck">
                        <label class="form-check-label" asp-for="TermsCheck">
                            I agree to the Terms and Conditions
                        </label>
                            <span class="errorMessage" asp-validation-for="TermsCheck"></span>
                    </div>
                    <!-- Pay Now Button -->
                    <button type="submit" class="btn btn-checkout w-100">Pay Now</button>
                </div>
            </div>
        </div>

        <!-- Review Section -->
        <div class="col-md-6">
            <div class="review-section-checkout">
                <h2 class="mb-4">Review Your Cart</h2>
                @{
                    var booking = ViewBag.BookingDetails;
                }

                @if (booking != null)
                {
                    <h1>Booking Details</h1>
                    <p><strong>Booking ID:</strong> @booking.BookingId</p>
                    <p><strong>Schedule ID:</strong> @booking.ScheduleId</p>
                    <p><strong>Subtotal:</strong> @booking.Subtotal</p>
                    <p><strong>Total:</strong> @booking.Total</p>
                    <p><strong>Member ID:</strong> @booking.MemberId</p>

                    <h2>Seats</h2>
                    <table>
                        <thead>
                            <tr>
                                <th>Seat No</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var seat in booking.Seats)
                            {
                                <tr>
                                    <td>@seat.SeatNo</td>
                                    <td>@seat.Status</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                }
                else
                {
                    <p>No booking details available.</p>
                }

                <!-- Discount Dropdown -->
                    <div class="mb-4">
                        <label asp-for="VoucherId" class="form-label">Discount Code</label>
                 <select asp-for="VoucherId" class="form-select">
                    <option selected>Select a code</option>

                        @foreach (var voucher in ViewBag.VouchersList)
                            {
                            <option style="text-transform:uppercase" value="@voucher.VoucherId">@voucher.VoucherName - Save RM @voucher.CashDiscount (@voucher.Qty qtys)</option>
                        }
<                  </select>

                        <button class="btn btn-checkout mt-3 w-100">Apply Discount</button>
                    </div>
             

                <!-- Summary -->
                <div class="d-flex justify-content-between">
                    <span>Subtotal</span>
                    <span>$45.00</span>
                </div>
                <div class="d-flex justify-content-between">
                    <span>Shipping</span>
                    <span>$5.00</span>
                </div>
                <div class="d-flex justify-content-between">
                    <span>Discount</span>
                    <span>-$10.00</span>
                </div>
                <hr>
                <div class="d-flex justify-content-between fw-bold">
                    <span>Total</span>
                    <span>$40.00</span>
                </div>
            </div>
        </div>
    </div>
</form>